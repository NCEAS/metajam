<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Use Case 3 - Processing a raster dataset • metajam</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Use Case 3 - Processing a raster dataset">
<meta property="og:description" content="metajam">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metajam</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Processing Datasets</li>
    <li>
      <a href="../articles/dataset-single.html">Use Case 1 - Processing a single dataset</a>
    </li>
    <li>
      <a href="../articles/dataset-batch-processing.html">Use Case 2 - Processing stream chemistry data for the LTER Luquillo site</a>
    </li>
    <li>
      <a href="../articles/reading-raster.html">Use Case 3 - Processing raster data</a>
    </li>
    <li class="dropdown-header">Processing Data Packages</li>
    <li>
      <a href="../articles/package-download.html">Use Case 4 - Downloading entire data packages using DOIs</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nceas/metajam">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="reading-raster_files/header-attrs-2.3/header-attrs.js"></script><script src="reading-raster_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Use Case 3 - Processing a raster dataset</h1>
                        <h4 class="author">Julien Brun, Mitchell Maier, Derek Strong and Irene Steves, NCEAS</h4>
            
            <h4 class="date">2020-09-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nceas/metajam/blob/master/vignettes/reading-raster.Rmd"><code>vignettes/reading-raster.Rmd</code></a></small>
      <div class="hidden name"><code>reading-raster.Rmd</code></div>

    </div>

    
    
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>This vignette aims to showcase how to overwrite the default function used by <code><a href="../reference/read_d1_files.html">metajam::read_d1_files</a></code> (spoiler alert it is <code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv</a></code>) to read none tabular dara. In this specific vignette, we use the example of reading a geotiff file using the <code>raster</code> package.</p>
<p>As example, we are using shipping routes frequency data used in the final human impacts model of 17 marine ecosystems and the 22 stressor drivers <a href="https://doi.org/10.5063/F15M63Z8">DOI: 10.5063/F15M63Z8</a>.. For more information on this research, please see Micheli F, Halpern BS, Walbridge S, Ciriaco S, Ferretti F, Fraschetti S, et al. (2013) Cumulative Human Impacts on Mediterranean and Black Sea Marine Ecosystems: Assessing Current Pressures and Opportunities. PLoS ONE 8(12). <a href="https://doi.org/10.1371/journal.pone.0079889" class="uri">https://doi.org/10.1371/journal.pone.0079889</a>.</p>
</div>
<div id="libraries-and-constants" class="section level2">
<h2 class="hasAnchor">
<a href="#libraries-and-constants" class="anchor"></a>Libraries and constants</h2>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="co"># devtools::install_github("NCEAS/metajam")</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/nceas/metajam">metajam</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://rspatial.org/raster">raster</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw">magrittr</span>)
</pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co"># Directory to save the data set</span>
<span class="kw">path_folder</span> <span class="op">&lt;-</span> <span class="st">"Human_impacts"</span>

<span class="co"># URL to download the dataset from DataONE</span>
<span class="kw">data_url</span> <span class="op">&lt;-</span> <span class="st">"https://cn.dataone.org/cn/v2/resolve/urn:uuid:6f101827-2fc3-43da-8c8d-7b1f927c4c73"</span>
</pre></div>
</div>
<div id="download-the-raster-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#download-the-raster-dataset" class="anchor"></a>Download the raster dataset</h2>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co"># Create the local directory to download the datasets</span>
<span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span>(<span class="kw">path_folder</span>, showWarnings = <span class="fl">FALSE</span>)

<span class="co"># Download the dataset and associated metdata </span>
<span class="kw">data_folder</span> <span class="op">&lt;-</span> <span class="kw">metajam</span>::<span class="fu"><a href="../reference/download_d1_data.html">download_d1_data</a></span>(<span class="kw">data_url</span>, <span class="kw">path_folder</span>)
<span class="co"># data_folder</span>
<span class="co"># "Human_impacts/doi_10.5063_F15M63Z8__shipping__tif"</span>
</pre></div>
<p>At this point, you should have the data and the metadata downloaded inside your main directory; <code>human_impacts</code> in this example. <code>metajam</code> organize the files as follow:</p>
<ul>
<li>Each dataset is stored a sub-directory named after the package DOI and the file name</li>
<li>Inside this sub-directory, you will find
<ul>
<li>the data: <code>shipping.tif</code>
</li>
<li>the raw EML with the naming convention <em>file name</em> + <code>__full_metadata.xml</code>: <code>shipping__full_metadata.xml</code>
</li>
<li>the package level metadata summary with the naming convention <em>file name</em> + <code>__summary_metadata.csv</code>: <code>shipping__summary_metadata.csv</code>
</li>
</ul>
</li>
</ul>
</div>
<div id="read-the-raster-file-and-metadata-in-your-r-environment" class="section level2">
<h2 class="hasAnchor">
<a href="#read-the-raster-file-and-metadata-in-your-r-environment" class="anchor"></a>Read the raster file and metadata in your R environment</h2>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="co"># Read the raster file and its associated metadata in as a named list</span>
<span class="co"># using the raster:raster function</span>
<span class="kw">shipping_routes</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/read_d1_files.html">read_d1_files</a></span>(<span class="kw">data_folder</span>, <span class="st">"raster"</span>)

<span class="co"># Plot the raster data</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(<span class="kw">shipping_routes</span><span class="op">$</span><span class="kw">data</span>)
</pre></div>
<div class="figure" style="text-align: center">
<img src="../inst/images/shipping-raster.png" alt="Shipping routes frequency" width="90%"><p class="caption">
Shipping routes frequency
</p>
</div>
</div>
<div id="investigate-the-metadata" class="section level1">
<h1 class="hasAnchor">
<a href="#investigate-the-metadata" class="anchor"></a>Investigate the metadata</h1>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">shipping_routes</span><span class="op">$</span><span class="kw">summary_metadata</span>
</pre></div>
<p><img src="../inst/images/shipping-metadata.png" width="100%" style="display: block; margin: auto;"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Julien Brun, Irene Steves, Mitchell Maier.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
