<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="metajam">
<title>Use Case 4 - Processing a Raster Dataset • metajam</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use Case 4 - Processing a Raster Dataset">
<meta property="og:description" content="metajam">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">metajam</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/use01_dataset-single-arctic.html">Use Case 1 - Processing a Single Dataset from Arctic Data Center</a>
    <a class="dropdown-item" href="../articles/use02_dataset-single-dataone.html">Use Case 2 - Processing a Single Dataset from DataOne</a>
    <a class="dropdown-item" href="../articles/use03_dataset-batch-processing.html">Use Case 3 - Processing Several Datasets</a>
    <a class="dropdown-item" href="../articles/use04_reading-raster.html">Use Case 4 - Processing a Raster Dataset</a>
    <a class="dropdown-item" href="../articles/use05_package-download.html">Use Case 5 - Downloading Entire Data Packages Using DOIs</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nceas/metajam/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Use Case 4 - Processing a Raster Dataset</h1>
                        <h4 data-toc-skip class="author">Julien Brun,
Mitchell Maier, Derek Strong and Irene Steves, NCEAS</h4>
            
            <h4 data-toc-skip class="date">2024-07-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nceas/metajam/blob/HEAD/vignettes/use04_reading-raster.Rmd" class="external-link"><code>vignettes/use04_reading-raster.Rmd</code></a></small>
      <div class="d-none name"><code>use04_reading-raster.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>This vignette aims to showcase how to overwrite the default function
used by <code><a href="../reference/read_d1_files.html">metajam::read_d1_files</a></code> (spoiler alert it is
<code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_csv</a></code>) to read none tabular dara. In this
specific vignette, we use the example of reading a geotiff file using
the <code>raster</code> package.</p>
<p>As example, we are using shipping routes frequency data used in the
final human impacts model of 17 marine ecosystems and the 22 stressor
drivers <a href="https://doi.org/10.5063/F15M63Z8" class="external-link">DOI:
10.5063/F15M63Z8</a>.. For more information on this research, please see
Micheli F, Halpern BS, Walbridge S, Ciriaco S, Ferretti F, Fraschetti S,
et al. (2013) Cumulative Human Impacts on Mediterranean and Black Sea
Marine Ecosystems: Assessing Current Pressures and Opportunities. PLoS
ONE 8(12). <a href="https://doi.org/10.1371/journal.pone.0079889" class="external-link uri">https://doi.org/10.1371/journal.pone.0079889</a>.</p>
</div>
<div class="section level3">
<h3 id="libraries-and-constants">Libraries and constants<a class="anchor" aria-label="anchor" href="#libraries-and-constants"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># devtools::install_github("NCEAS/metajam")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nceas.github.io/metajam/">metajam</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Directory to save the data set</span></span>
<span><span class="va">path_folder</span> <span class="op">&lt;-</span> <span class="st">"Human_impacts"</span></span>
<span></span>
<span><span class="co"># URL to download the dataset from DataONE</span></span>
<span><span class="va">data_url</span> <span class="op">&lt;-</span> <span class="st">"https://cn.dataone.org/cn/v2/resolve/urn:uuid:6f101827-2fc3-43da-8c8d-7b1f927c4c73"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="download-the-raster-dataset">Download the raster dataset<a class="anchor" aria-label="anchor" href="#download-the-raster-dataset"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create the local directory to download the datasets</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">path_folder</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Download the dataset and associated metdata </span></span>
<span><span class="va">data_folder</span> <span class="op">&lt;-</span> <span class="fu">metajam</span><span class="fu">::</span><span class="fu"><a href="../reference/download_d1_data.html">download_d1_data</a></span><span class="op">(</span><span class="va">data_url</span>, <span class="va">path_folder</span><span class="op">)</span></span>
<span><span class="co"># data_folder</span></span>
<span><span class="co"># "Human_impacts/doi_10.5063_F15M63Z8__shipping__tif"</span></span></code></pre></div>
<p>At this point, you should have the data and the metadata downloaded
inside your main directory; <code>human_impacts</code> in this example.
<code>metajam</code> organize the files as follow:</p>
<ul>
<li>Each dataset is stored a sub-directory named after the package DOI
and the file name</li>
<li>Inside this sub-directory, you will find
<ul>
<li>the data: <code>shipping.tif</code>
</li>
<li>the raw EML with the naming convention <em>file name</em> +
<code>__full_metadata.xml</code>:
<code>shipping__full_metadata.xml</code>
</li>
<li>the package level metadata summary with the naming convention
<em>file name</em> + <code>__summary_metadata.csv</code>:
<code>shipping__summary_metadata.csv</code>
</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="read-the-raster-file-and-metadata-in-your-r-environment">Read the raster file and metadata in your R environment<a class="anchor" aria-label="anchor" href="#read-the-raster-file-and-metadata-in-your-r-environment"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read the raster file and its associated metadata in as a named list</span></span>
<span><span class="co"># using the raster:raster function</span></span>
<span><span class="va">shipping_routes</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/read_d1_files.html">read_d1_files</a></span><span class="op">(</span><span class="va">data_folder</span>, <span class="st">"raster"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the raster data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">shipping_routes</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="../reference/figures/shipping-raster.png" alt="Shipping routes frequency" width="90%"><p class="caption">
Shipping routes frequency
</p>
</div>
</div>
<div class="section level2">
<h2 id="investigate-the-metadata">Investigate the metadata<a class="anchor" aria-label="anchor" href="#investigate-the-metadata"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">shipping_routes</span><span class="op">$</span><span class="va">summary_metadata</span></span></code></pre></div>
<p><img src="../reference/figures/shipping-metadata.png" width="100%" style="display: block; margin: auto;"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Julien Brun, Irene Steves, Mitchell Maier, Kristen Peach, Nicholas Lyon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
